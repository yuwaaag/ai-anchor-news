<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <style>
        :root { --main-red: #cc0000; --gold: #ffcc00; }
        body, html { margin: 0; padding: 0; width: 1920px; height: 1080px; overflow: hidden; background: transparent; font-family: 'Oswald', sans-serif; }

        /* Background Scene */
        .news-set {
            width: 100%; height: 100%;
            background: url('https://images.unsplash.com/photo-1495020689067-958852a7765e?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80'); 
            background-size: cover;
            display: flex; align-items: flex-end; justify-content: center;
            position: relative;
        }

        /* AI Anchor Container */
        .anchor-container {
            position: absolute; left: 50px; bottom: 0;
            width: 800px; height: 1000px; z-index: 5;
        }
        #anchorVideo {
            width: 100%; height: 100%; object-fit: contain;
            filter: drop-shadow(0 0 20px rgba(0,0,0,0.5));
        }

        /* News Box Design */
        .news-overlay {
            width: 100%; height: 350px;
            background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
            position: absolute; bottom: 0; z-index: 10;
            display: flex; flex-direction: column; align-items: center; padding-bottom: 50px;
        }

        .breaking-tag {
            background: var(--main-red); color: white; padding: 10px 40px;
            font-size: 40px; font-weight: bold; border: 4px solid var(--gold);
            margin-bottom: 20px; animation: flash 1s infinite;
        }

        .headline-container {
            width: 80%; background: white; padding: 40px;
            border-radius: 15px; border-left: 20px solid var(--main-red);
            box-shadow: 0 0 40px rgba(0,0,0,0.5);
        }

        .headline-text {
            font-size: 60px; color: #111; margin: 0; text-align: center;
            font-weight: bold; line-height: 1.2;
        }

        @keyframes flash { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@700&display=swap" rel="stylesheet">
</head>
<body>

<div class="news-set">
    <div class="anchor-container">
        <video id="anchorVideo" muted loop>
            <source src="https://v.ftcdn.net/06/13/46/36/700_F_613463638_p59G6gE5j6N6v7lK4T6T2Ym6p6lH6N6v_ST.mp4" type="video/mp4">
        </video>
    </div>

    <div class="news-overlay">
        <div class="breaking-tag">BREAKING NEWS</div>
        <div class="headline-container">
            <p class="headline-text" id="headline">खबरें लोड हो रही हैं...</p>
        </div>
    </div>
</div>

<audio id="newsBGM" loop>
    <source src="https://www.soundjay.com/free-music/sounds/action-movie-trailer-01.mp3" type="audio/mpeg">
</audio>

<script>
    const SHEET_ID = '19sVzDeE9ey7da9DQe5LFYdPx7KEdHzVjffmh80LE2wE';
    const CSV_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/export?format=csv&gid=0`;

    let newsData = [];
    let currentIndex = 0;

    async function loadNews() {
        try {
            const response = await fetch(CSV_URL + '&cb=' + Date.now());
            const data = await response.text();
            const rows = data.split(/\r?\n/);
            newsData = rows.map(r => r.replace(/^"|"$/g, '').trim())
                           .filter(r => r !== "" && r.toLowerCase() !== "news");
            
            if (newsData.length > 0 && !window.isPlaying) {
                window.isPlaying = true;
                showNext();
            }
        } catch (e) { console.error("Sheet Load Error"); }
    }

    function showNext() {
        if (currentIndex >= newsData.length) currentIndex = 0;
        const text = newsData[currentIndex];
        document.getElementById('headline').innerText = text;

        // Start Speaking & Animation
        speak(text);
        currentIndex++;
    }

    function speak(txt) {
        window.speechSynthesis.cancel();
        const msg = new SpeechSynthesisUtterance("ब्रेकिंग न्यूज़... " + txt);
        msg.lang = 'hi-IN';
        msg.rate = 0.9;

        const video = document.getElementById('anchorVideo');
        
        msg.onstart = () => {
            video.play(); // एंकर बोलना (वीडियो चलना) शुरू करेगा
        };

        msg.onend = () => {
            video.pause(); // खबर खत्म तो एंकर शांत
            setTimeout(showNext, 2000); // 2 सेकंड बाद अगली खबर
        };

        window.speechSynthesis.speak(msg);
    }

    window.onclick = () => {
        document.getElementById('newsBGM').volume = 0.15;
        document.getElementById('newsBGM').play();
        loadNews();
    };

    setInterval(loadNews, 60000);
</script>

</body>
</html>
